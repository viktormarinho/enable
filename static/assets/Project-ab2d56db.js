import{S as G,i as X,s as Q,f as m,g as k,h as ye,b as i,c as S,l as R,t as C,j as ce,k as M,m as ue,e as q,o as se,p as E,q as T,r as B,I as Ce,u as Me,v as Ee,B as Te,F as P,w as J,d as f,x as Be,y as Fe,G as Z,z as pe,H as Se,n as L,a as y,J as fe,C as re,D as Ie,E as qe,K as ge}from"./index-5b9bd855.js";import{P as Ae,c as De,N as Oe}from"./Portal-6961e4b0.js";import{C as Pe,D as ze,B as Le}from"./BackToProjects-64ccd274.js";function $e(l){let e,t;return e=new Ae({props:{$$slots:{default:[Je]},$$scope:{ctx:l}}}),{c(){E(e.$$.fragment)},m(n,s){T(e,n,s),t=!0},p(n,s){const a={};s&2079&&(a.$$scope={dirty:s,ctx:n}),e.$set(a)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function He(l){let e,t;return e=new Se({props:{width:"32",height:"32"}}),{c(){E(e.$$.fragment)},m(n,s){T(e,n,s),t=!0},p:L,i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function Je(l){let e,t,n,s,a,c,o,r,u,p,v,b,_,g,h,d,j,F;function I($){l[9]($)}let A={maxLength:"35",type:"text",placeholder:"Feature name",error:l[1].name,$$slots:{default:[He]},$$scope:{ctx:l}};return l[0].name!==void 0&&(A.value=l[0].name),a=new Ce({props:A}),Me.push(()=>Ee(a,"value",I)),h=new Te({props:{text:"Create",loading:l[4]}}),{c(){e=m("div"),t=m("form"),n=m("span"),n.textContent="New feature",s=k(),E(a.$$.fragment),o=k(),r=m("p"),u=P("Feature identifier: "),p=m("strong"),v=P(l[2]),b=k(),_=m("p"),_.textContent="This is a unique identifier for this feature across all your projects.",g=k(),E(h.$$.fragment),i(n,"class","svelte-138efei"),i(p,"class","svelte-138efei"),i(r,"class","svelte-138efei"),i(_,"class","help svelte-138efei"),i(t,"class","modal-content svelte-138efei"),i(e,"class","hidden svelte-138efei"),J(e,"open",l[3])},m($,D){S($,e,D),f(e,t),f(t,n),f(t,s),T(a,t,null),f(t,o),f(t,r),f(r,u),f(r,p),f(p,v),f(t,b),f(t,_),f(t,g),T(h,t,null),d=!0,j||(F=[R(t,"submit",l[5]),Be(De.call(null,e)),R(e,"click_outside",l[10])],j=!0)},p($,D){const U={};D&2&&(U.error=$[1].name),D&2048&&(U.$$scope={dirty:D,ctx:$}),!c&&D&1&&(c=!0,U.value=$[0].name,Fe(()=>c=!1)),a.$set(U),(!d||D&4)&&Z(v,$[2]);const N={};D&16&&(N.loading=$[4]),h.$set(N),(!d||D&8)&&J(e,"open",$[3])},i($){d||(C(a.$$.fragment,$),C(h.$$.fragment,$),d=!0)},o($){M(a.$$.fragment,$),M(h.$$.fragment,$),d=!1},d($){$&&q(e),B(a),B(h),j=!1,pe(F)}}}function Ke(l){let e,t,n,s,a,c,o=l[3]&&$e(l);return{c(){e=m("button"),e.innerHTML="<span>Feature</span>",t=k(),o&&o.c(),n=ye(),i(e,"class","btn-secondary")},m(r,u){S(r,e,u),S(r,t,u),o&&o.m(r,u),S(r,n,u),s=!0,a||(c=R(e,"click",l[8]),a=!0)},p(r,[u]){r[3]?o?(o.p(r,u),u&8&&C(o,1)):(o=$e(r),o.c(),C(o,1),o.m(n.parentNode,n)):o&&(ce(),M(o,1,1,()=>{o=null}),ue())},i(r){s||(C(o),s=!0)},o(r){M(o),s=!1},d(r){r&&(q(e),q(t),q(n)),o&&o.d(r),a=!1,c()}}}function Re(l,e,t){let{projectId:n}=e,{projectName:s}=e,a={name:"",project_id:n},c=se.make(a),o="",r=!1,u=!1;async function p(g){g.preventDefault(),t(4,u=!0);const h=await fetch("/api/features",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}});if(!h.ok){t(1,c=se.apply(c,await h.json())),t(4,u=!1);return}location.reload()}const v=()=>t(3,r=!0);function b(g){l.$$.not_equal(a.name,g)&&(a.name=g,t(0,a))}const _=()=>t(3,r=!1);return l.$$set=g=>{"projectId"in g&&t(6,n=g.projectId),"projectName"in g&&t(7,s=g.projectName)},l.$$.update=()=>{l.$$.dirty&129&&(a.name.length>0?t(2,o=`${s}_${a.name}`.toLowerCase().split(" ").join("_")):t(2,o=""))},[a,c,o,r,u,p,n,s,v,b,_]}class Ge extends G{constructor(e){super(),X(this,e,Re,Ke,Q,{projectId:6,projectName:7})}}function Xe(l){let e,t,n,s,a,c;return{c(){e=y("svg"),t=y("path"),n=y("path"),s=y("path"),a=y("path"),c=y("path"),i(t,"stroke","none"),i(t,"d","M0 0h24v24H0z"),i(t,"fill","none"),i(n,"d","M4 13h5"),i(s,"d","M12 16v-8h3a2 2 0 0 1 2 2v1a2 2 0 0 1 -2 2h-3"),i(a,"d","M20 8v8"),i(c,"d","M9 16v-5.5a2.5 2.5 0 0 0 -5 0v5.5"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","icon icon-tabler icon-tabler-api"),i(e,"width","24"),i(e,"height","24"),i(e,"viewBox","0 0 24 24"),i(e,"stroke-width","2"),i(e,"stroke","currentColor"),i(e,"fill","none"),i(e,"stroke-linecap","round"),i(e,"stroke-linejoin","round")},m(o,r){S(o,e,r),f(e,t),f(e,n),f(e,s),f(e,a),f(e,c)},p:L,i:L,o:L,d(o){o&&q(e)}}}class Qe extends G{constructor(e){super(),X(this,e,null,Xe,Q,{})}}function Ue(l){let e,t,n,s,a,c;return n=new Qe({}),{c(){e=m("button"),t=m("span"),E(n.$$.fragment),i(t,"class","svelte-16ad7zl"),i(e,"class","btn-secondary svelte-16ad7zl"),J(e,"selected",l[0])},m(o,r){S(o,e,r),f(e,t),T(n,t,null),s=!0,a||(c=R(e,"click",l[1]),a=!0)},p(o,[r]){(!s||r&1)&&J(e,"selected",o[0])},i(o){s||(C(n.$$.fragment,o),s=!0)},o(o){M(n.$$.fragment,o),s=!1},d(o){o&&q(e),B(n),a=!1,c()}}}function Ve(l,e,t){let{selected:n=!1}=e;function s(a){fe.call(this,l,a)}return l.$$set=a=>{"selected"in a&&t(0,n=a.selected)},[n,s]}class We extends G{constructor(e){super(),X(this,e,Ve,Ue,Q,{selected:0})}}function Ye(l){let e,t,n,s,a,c,o,r,u,p,v,b,_,g,h,d,j,F,I;return{c(){e=m("div"),t=m("div"),n=m("span"),n.textContent='import { EnableClient } from "@enable/ts-sdk";',s=k(),a=m("span"),a.textContent=`export const features = new EnableClient(${`{ url: "${location.origin}", token: env.ENABLE_TOKEN }`});`,c=k(),o=m("span"),r=k(),u=m("span"),u.textContent="...",p=k(),v=m("span"),b=k(),_=m("span"),_.textContent='import { features } from "config";',g=k(),h=m("span"),d=P('const isActive = features.isActive("'),j=P(l[0]),F=P('"); // '),I=P(l[1]),i(t,"class","code svelte-1f8w8fv"),i(e,"class","api-type-container svelte-1f8w8fv")},m(A,$){S(A,e,$),f(e,t),f(t,n),f(t,s),f(t,a),f(t,c),f(t,o),f(t,r),f(t,u),f(t,p),f(t,v),f(t,b),f(t,_),f(t,g),f(t,h),f(h,d),f(h,j),f(h,F),f(h,I)},p(A,$){$&1&&Z(j,A[0]),$&2&&Z(I,A[1])},d(A){A&&q(e)}}}function Ze(l){let e,t,n,s,a=location.origin+"",c,o,r,u,p,v,b,_=JSON.stringify({active:l[1]},null,2)+"",g;return{c(){e=m("div"),t=m("div"),n=m("code"),s=P('curl -i -H "Authorization: Bearer ENABLE_TOKEN" -X GET '),c=P(a),o=P("/api/feature/"),r=P(l[0]),u=k(),p=m("span"),p.textContent="Response",v=k(),b=m("code"),g=P(_),i(n,"class","svelte-1f8w8fv"),i(t,"class","container svelte-1f8w8fv"),i(p,"class","label svelte-1f8w8fv"),i(b,"class","svelte-1f8w8fv"),i(e,"class","api-type-container svelte-1f8w8fv")},m(h,d){S(h,e,d),f(e,t),f(t,n),f(n,s),f(n,c),f(n,o),f(n,r),f(e,u),f(e,p),f(e,v),f(e,b),f(b,g)},p(h,d){d&1&&Z(r,h[0]),d&2&&_!==(_=JSON.stringify({active:h[1]},null,2)+"")&&Z(g,_)},d(h){h&&q(e)}}}function xe(l){let e,t,n,s,a,c,o,r,u,p,v,b;function _(d,j){if(d[2]==="rest")return Ze;if(d[2]==="ts-sdk")return Ye}let g=_(l),h=g&&g(l);return{c(){e=m("div"),t=m("div"),n=m("span"),s=P("REST API"),c=k(),o=m("span"),r=P("Typescript SDK"),p=k(),h&&h.c(),i(n,"role","tab"),i(n,"tabindex","0"),i(n,"aria-selected",a=l[2]==="rest"),i(n,"class","svelte-1f8w8fv"),i(o,"role","tab"),i(o,"tabindex","0"),i(o,"aria-selected",u=l[2]==="ts-sdk"),i(o,"class","svelte-1f8w8fv"),i(t,"class","tab-controls svelte-1f8w8fv"),i(e,"class","defs svelte-1f8w8fv")},m(d,j){S(d,e,j),f(e,t),f(t,n),f(n,s),f(t,c),f(t,o),f(o,r),f(e,p),h&&h.m(e,null),v||(b=[R(n,"click",l[3]),R(o,"click",l[4])],v=!0)},p(d,[j]){j&4&&a!==(a=d[2]==="rest")&&i(n,"aria-selected",a),j&4&&u!==(u=d[2]==="ts-sdk")&&i(o,"aria-selected",u),g===(g=_(d))&&h?h.p(d,j):(h&&h.d(1),h=g&&g(d),h&&(h.c(),h.m(e,null)))},i:L,o:L,d(d){d&&q(e),h&&h.d(),v=!1,pe(b)}}}function et(l,e,t){let{name:n=""}=e,{active:s=!1}=e,a="rest";const c=()=>t(2,a="rest"),o=()=>t(2,a="ts-sdk");return l.$$set=r=>{"name"in r&&t(0,n=r.name),"active"in r&&t(1,s=r.active)},[n,s,a,c,o]}class tt extends G{constructor(e){super(),X(this,e,et,xe,Q,{name:0,active:1})}}function nt(l){let e,t,n,s,a,c=l[0].feature_id+"",o,r,u,p,v,b,_,g=l[0].active?"Active":"Disabled",h,d,j,F,I,A,$,D,U;return n=new Pe({props:{text:l[0].feature_id}}),u=new We({props:{selected:l[1]}}),u.$on("click",l[3]),v=new ze({props:{label:`${l[0].feature_id} from all environments`}}),v.$on("confirm",l[4]),A=new tt({props:{name:l[0].feature_id,active:l[0].active}}),{c(){e=m("div"),t=m("div"),E(n.$$.fragment),s=k(),a=m("span"),o=P(c),r=k(),E(u.$$.fragment),p=k(),E(v.$$.fragment),b=k(),_=m("span"),h=P(g),d=k(),j=m("button"),j.innerHTML='<div class="ball svelte-piq3xe"></div>',F=k(),I=m("div"),E(A.$$.fragment),i(a,"class","name svelte-piq3xe"),i(_,"class","tag svelte-piq3xe"),J(_,"tag-active",l[0].active),i(j,"class","toggle svelte-piq3xe"),J(j,"active",l[0].active),i(t,"class","feature svelte-piq3xe"),i(I,"class","no-h svelte-piq3xe"),J(I,"show",l[1]),i(e,"class","feature-container svelte-piq3xe")},m(N,O){S(N,e,O),f(e,t),T(n,t,null),f(t,s),f(t,a),f(a,o),f(t,r),T(u,t,null),f(t,p),T(v,t,null),f(t,b),f(t,_),f(_,h),f(t,d),f(t,j),f(e,F),f(e,I),T(A,I,null),$=!0,D||(U=R(j,"click",l[2]),D=!0)},p(N,[O]){const W={};O&1&&(W.text=N[0].feature_id),n.$set(W),(!$||O&1)&&c!==(c=N[0].feature_id+"")&&Z(o,c);const le={};O&2&&(le.selected=N[1]),u.$set(le);const Y={};O&1&&(Y.label=`${N[0].feature_id} from all environments`),v.$set(Y),(!$||O&1)&&g!==(g=N[0].active?"Active":"Disabled")&&Z(h,g),(!$||O&1)&&J(_,"tag-active",N[0].active),(!$||O&1)&&J(j,"active",N[0].active);const K={};O&1&&(K.name=N[0].feature_id),O&1&&(K.active=N[0].active),A.$set(K),(!$||O&2)&&J(I,"show",N[1])},i(N){$||(C(n.$$.fragment,N),C(u.$$.fragment,N),C(v.$$.fragment,N),C(A.$$.fragment,N),$=!0)},o(N){M(n.$$.fragment,N),M(u.$$.fragment,N),M(v.$$.fragment,N),M(A.$$.fragment,N),$=!1},d(N){N&&q(e),B(n),B(u),B(v),B(A),D=!1,U()}}}function lt(l,e,t){let{feature:n}=e,s=!1;function a(r){fe.call(this,l,r)}const c=()=>t(1,s=!s);function o(r){fe.call(this,l,r)}return l.$$set=r=>{"feature"in r&&t(0,n=r.feature)},[n,s,a,c,o]}class at extends G{constructor(e){super(),X(this,e,lt,nt,Q,{feature:0})}}function we(l,e,t){const n=l.slice();return n[5]=e[t],n}function be(l){let e,t;function n(){return l[3](l[5])}function s(){return l[4](l[5])}return e=new at({props:{feature:l[5]}}),e.$on("click",n),e.$on("confirm",s),{c(){E(e.$$.fragment)},m(a,c){T(e,a,c),t=!0},p(a,c){l=a;const o={};c&1&&(o.feature=l[5]),e.$set(o)},i(a){t||(C(e.$$.fragment,a),t=!0)},o(a){M(e.$$.fragment,a),t=!1},d(a){B(e,a)}}}function st(l){let e,t,n=re(l[0]),s=[];for(let c=0;c<n.length;c+=1)s[c]=be(we(l,n,c));const a=c=>M(s[c],1,1,()=>{s[c]=null});return{c(){e=m("div");for(let c=0;c<s.length;c+=1)s[c].c();i(e,"class","feature-list svelte-1oo10f7")},m(c,o){S(c,e,o);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null);t=!0},p(c,[o]){if(o&7){n=re(c[0]);let r;for(r=0;r<n.length;r+=1){const u=we(c,n,r);s[r]?(s[r].p(u,o),C(s[r],1)):(s[r]=be(u),s[r].c(),C(s[r],1),s[r].m(e,null))}for(ce(),r=n.length;r<s.length;r+=1)a(r);ue()}},i(c){if(!t){for(let o=0;o<n.length;o+=1)C(s[o]);t=!0}},o(c){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)M(s[o]);t=!1},d(c){c&&q(e),Ie(s,c)}}}function rt(l,e,t){let{features:n=[]}=e;async function s(r){(await fetch("/api/features/toggle",{method:"POST",body:JSON.stringify({id:r}),headers:{"Content-Type":"application/json"}})).ok&&t(0,n=n.map(p=>(p.id==r&&(p.active=!p.active),p)))}async function a(r){(await fetch("/api/features",{method:"DELETE",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}})).ok&&t(0,n=n.filter(p=>p.id!==r.id))}const c=r=>s(r.id),o=r=>a(r);return l.$$set=r=>{"features"in r&&t(0,n=r.features)},[n,s,a,c,o]}class it extends G{constructor(e){super(),X(this,e,rt,st,Q,{features:0})}}function ot(l){let e,t,n,s,a,c,o,r,u,p,v;return{c(){e=y("svg"),t=y("path"),n=y("path"),s=y("path"),a=y("path"),c=y("path"),o=y("path"),r=y("path"),u=y("path"),p=y("path"),v=y("path"),i(t,"stroke","none"),i(t,"d","M0 0h24v24H0z"),i(t,"fill","none"),i(n,"d","M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"),i(s,"d","M4 6l8 0"),i(a,"d","M16 6l4 0"),i(c,"d","M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"),i(o,"d","M4 12l2 0"),i(r,"d","M10 12l10 0"),i(u,"d","M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"),i(p,"d","M4 18l11 0"),i(v,"d","M19 18l1 0"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","icon icon-tabler icon-tabler-adjustments-horizontal"),i(e,"width","24"),i(e,"height","24"),i(e,"viewBox","0 0 24 24"),i(e,"stroke-width","2"),i(e,"stroke","currentColor"),i(e,"fill","none"),i(e,"stroke-linecap","round"),i(e,"stroke-linejoin","round")},m(b,_){S(b,e,_),f(e,t),f(e,n),f(e,s),f(e,a),f(e,c),f(e,o),f(e,r),f(e,u),f(e,p),f(e,v)},p:L,i:L,o:L,d(b){b&&q(e)}}}class ft extends G{constructor(e){super(),X(this,e,null,ot,Q,{})}}function ct(l){let e,t,n,s;return{c(){e=y("svg"),t=y("path"),n=y("path"),s=y("path"),i(t,"stroke","none"),i(t,"d","M0 0h24v24H0z"),i(t,"fill","none"),i(n,"d","M12 5l0 14"),i(s,"d","M5 12l14 0"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","icon icon-tabler icon-tabler-plus"),i(e,"width","24"),i(e,"height","24"),i(e,"viewBox","0 0 24 24"),i(e,"stroke-width","2"),i(e,"stroke","currentColor"),i(e,"fill","none"),i(e,"stroke-linecap","round"),i(e,"stroke-linejoin","round")},m(a,c){S(a,e,c),f(e,t),f(e,n),f(e,s)},p:L,i:L,o:L,d(a){a&&q(e)}}}class ut extends G{constructor(e){super(),X(this,e,null,ct,Q,{})}}function pt(l){let e,t,n,s,a,c,o,r,u;return{c(){e=y("svg"),t=y("path"),n=y("path"),s=y("path"),a=y("path"),c=y("path"),o=y("path"),r=y("path"),u=y("path"),i(t,"stroke","none"),i(t,"d","M0 0h24v24H0z"),i(t,"fill","none"),i(n,"d","M20 7.5v9l-4 2.25l-4 2.25l-4 -2.25l-4 -2.25v-9l4 -2.25l4 -2.25l4 2.25z"),i(s,"d","M12 12l4 -2.25l4 -2.25"),i(a,"d","M12 12l0 9"),i(c,"d","M12 12l-4 -2.25l-4 -2.25"),i(o,"d","M20 12l-4 2v4.75"),i(r,"d","M4 12l4 2l0 4.75"),i(u,"d","M8 5.25l4 2.25l4 -2.25"),i(e,"width",l[0]),i(e,"height",l[1]),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","icon icon-tabler icon-tabler-brand-codesandbox"),i(e,"viewBox","0 0 24 24"),i(e,"stroke-width","2"),i(e,"stroke","currentColor"),i(e,"fill","none"),i(e,"stroke-linecap","round"),i(e,"stroke-linejoin","round")},m(p,v){S(p,e,v),f(e,t),f(e,n),f(e,s),f(e,a),f(e,c),f(e,o),f(e,r),f(e,u)},p(p,[v]){v&1&&i(e,"width",p[0]),v&2&&i(e,"height",p[1])},i:L,o:L,d(p){p&&q(e)}}}function dt(l,e,t){let{width:n="64"}=e,{height:s="64"}=e;return l.$$set=a=>{"width"in a&&t(0,n=a.width),"height"in a&&t(1,s=a.height)},[n,s]}class mt extends G{constructor(e){super(),X(this,e,dt,pt,Q,{width:0,height:1})}}function ke(l){let e,t;return e=new Ae({props:{$$slots:{default:[_t]},$$scope:{ctx:l}}}),{c(){E(e.$$.fragment)},m(n,s){T(e,n,s),t=!0},p(n,s){const a={};s&2063&&(a.$$scope={dirty:s,ctx:n}),e.$set(a)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function ht(l){let e,t;return e=new mt({props:{width:"32",height:"32"}}),{c(){E(e.$$.fragment)},m(n,s){T(e,n,s),t=!0},p:L,i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function _t(l){let e,t,n,s,a,c,o,r,u,p,v,b,_;function g(d){l[8](d)}let h={maxLength:"20",type:"text",placeholder:"Environment name",error:l[1].name,$$slots:{default:[ht]},$$scope:{ctx:l}};return l[0].name!==void 0&&(h.value=l[0].name),a=new Ce({props:h}),Me.push(()=>Ee(a,"value",g)),p=new Te({props:{text:"Create",loading:l[3]}}),{c(){e=m("div"),t=m("form"),n=m("span"),n.textContent="New environment",s=k(),E(a.$$.fragment),o=k(),r=m("p"),r.textContent="Tip: Try to choose a short name.",u=k(),E(p.$$.fragment),i(n,"class","svelte-138efei"),i(r,"class","help svelte-138efei"),i(t,"class","modal-content svelte-138efei"),i(e,"class","hidden svelte-138efei"),J(e,"open",l[2])},m(d,j){S(d,e,j),f(e,t),f(t,n),f(t,s),T(a,t,null),f(t,o),f(t,r),f(t,u),T(p,t,null),v=!0,b||(_=[R(t,"submit",l[4]),Be(De.call(null,e)),R(e,"click_outside",l[9])],b=!0)},p(d,j){const F={};j&2&&(F.error=d[1].name),j&2048&&(F.$$scope={dirty:j,ctx:d}),!c&&j&1&&(c=!0,F.value=d[0].name,Fe(()=>c=!1)),a.$set(F);const I={};j&8&&(I.loading=d[3]),p.$set(I),(!v||j&4)&&J(e,"open",d[2])},i(d){v||(C(a.$$.fragment,d),C(p.$$.fragment,d),v=!0)},o(d){M(a.$$.fragment,d),M(p.$$.fragment,d),v=!1},d(d){d&&q(e),B(a),B(p),b=!1,pe(_)}}}function vt(l){let e,t,n,s,a,c,o=l[2]&&ke(l);return{c(){e=m("button"),e.innerHTML="<span>Environment</span>",t=k(),o&&o.c(),n=ye(),i(e,"class","btn-secondary")},m(r,u){S(r,e,u),S(r,t,u),o&&o.m(r,u),S(r,n,u),s=!0,a||(c=R(e,"click",l[7]),a=!0)},p(r,[u]){r[2]?o?(o.p(r,u),u&4&&C(o,1)):(o=ke(r),o.c(),C(o,1),o.m(n.parentNode,n)):o&&(ce(),M(o,1,1,()=>{o=null}),ue())},i(r){s||(C(o),s=!0)},o(r){M(o),s=!1},d(r){r&&(q(e),q(t),q(n)),o&&o.d(r),a=!1,c()}}}function gt(l,e,t){let{projectId:n}=e,{projectName:s}=e,a={name:"",project_id:n},c=se.make(a),o=!1,r=!1;async function u(_){_.preventDefault(),t(3,r=!0);const g=await fetch("/api/environment",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}});if(!g.ok){t(1,c=se.apply(c,await g.json())),t(3,r=!1);return}location.reload()}const p=()=>t(2,o=!0);function v(_){l.$$.not_equal(a.name,_)&&(a.name=_,t(0,a))}const b=()=>t(2,o=!1);return l.$$set=_=>{"projectId"in _&&t(5,n=_.projectId),"projectName"in _&&t(6,s=_.projectName)},l.$$.update=()=>{l.$$.dirty&65&&a.name.length>0&&`${s}_${a.name}`.toLowerCase().split(" ").join("_")},[a,c,o,r,u,n,s,p,v,b]}class $t extends G{constructor(e){super(),X(this,e,gt,vt,Q,{projectId:5,projectName:6})}}function je(l,e,t){const n=l.slice();return n[5]=e[t],n}function Ne(l){let e,t=l[5].name+"",n,s;return{c(){e=m("option"),n=P(t),e.__value=s=l[5].id,ge(e,e.__value)},m(a,c){S(a,e,c),f(e,n)},p(a,c){c&2&&t!==(t=a[5].name+"")&&Z(n,t),c&2&&s!==(s=a[5].id)&&(e.__value=s,ge(e,e.__value))},d(a){a&&q(e)}}}function wt(l){let e,t,n,s,a,c,o,r,u=l[1].project.name+"",p,v,b,_,g,h,d,j,F,I,A,$,D,U,N,O,W,le,Y,K,de,ee,me,te,ae,ie,he;t=new Oe({}),a=new Le({});let ne=re(l[1].envs),z=[];for(let w=0;w<ne.length;w+=1)z[w]=Ne(je(l,ne,w));return D=new ft({}),W=new ut({}),K=new Ge({props:{projectId:l[0].id,projectName:l[1].project.name}}),ee=new $t({props:{projectId:l[0].id,projectName:l[1].project.name}}),te=new it({props:{features:l[2]}}),{c(){e=m("div"),E(t.$$.fragment),n=k(),s=m("div"),E(a.$$.fragment),c=k(),o=m("header"),r=m("h1"),p=P(u),v=k(),b=m("div"),_=m("div"),g=m("span"),g.textContent="Change environment",h=k(),d=m("select");for(let w=0;w<z.length;w+=1)z[w].c();j=k(),F=m("div"),I=m("span"),I.textContent="Project settings",A=k(),$=m("button"),E(D.$$.fragment),U=k(),N=m("div"),O=m("button"),E(W.$$.fragment),le=k(),Y=m("div"),E(K.$$.fragment),de=k(),E(ee.$$.fragment),me=k(),E(te.$$.fragment),i(g,"class","svelte-1yb8r5u"),i(_,"class","tooltip svelte-1yb8r5u"),i(I,"class","svelte-1yb8r5u"),i($,"class","btn-secondary"),i(F,"class","tooltip svelte-1yb8r5u"),i(O,"class","btn-secondary"),i(Y,"class","new-options svelte-1yb8r5u"),i(N,"class","new-container svelte-1yb8r5u"),i(b,"class","project-actions svelte-1yb8r5u"),i(o,"class","page-header"),i(s,"class","page")},m(w,V){S(w,e,V),T(t,e,null),f(e,n),f(e,s),T(a,s,null),f(s,c),f(s,o),f(o,r),f(r,p),f(o,v),f(o,b),f(b,_),f(_,g),f(_,h),f(_,d);for(let x=0;x<z.length;x+=1)z[x]&&z[x].m(d,null);f(b,j),f(b,F),f(F,I),f(F,A),f(F,$),T(D,$,null),f(b,U),f(b,N),f(N,O),T(W,O,null),f(N,le),f(N,Y),T(K,Y,null),f(Y,de),T(ee,Y,null),f(s,me),T(te,s,null),ae=!0,ie||(he=R(d,"change",l[3]),ie=!0)},p(w,[V]){if((!ae||V&2)&&u!==(u=w[1].project.name+"")&&Z(p,u),V&2){ne=re(w[1].envs);let H;for(H=0;H<ne.length;H+=1){const ve=je(w,ne,H);z[H]?z[H].p(ve,V):(z[H]=Ne(ve),z[H].c(),z[H].m(d,null))}for(;H<z.length;H+=1)z[H].d(1);z.length=ne.length}const x={};V&1&&(x.projectId=w[0].id),V&2&&(x.projectName=w[1].project.name),K.$set(x);const oe={};V&1&&(oe.projectId=w[0].id),V&2&&(oe.projectName=w[1].project.name),ee.$set(oe);const _e={};V&4&&(_e.features=w[2]),te.$set(_e)},i(w){ae||(C(t.$$.fragment,w),C(a.$$.fragment,w),C(D.$$.fragment,w),C(W.$$.fragment,w),C(K.$$.fragment,w),C(ee.$$.fragment,w),C(te.$$.fragment,w),ae=!0)},o(w){M(t.$$.fragment,w),M(a.$$.fragment,w),M(D.$$.fragment,w),M(W.$$.fragment,w),M(K.$$.fragment,w),M(ee.$$.fragment,w),M(te.$$.fragment,w),ae=!1},d(w){w&&q(e),B(t),B(a),Ie(z,w),B(D),B(W),B(K),B(ee),B(te),ie=!1,he()}}}function bt(l,e,t){let{params:n={id:""}}=e,s={project:{name:""},envs:[]},a=[],c=null;qe(async()=>{const r=await fetch(`/api/projects/meta/${n.id}`);t(1,s=await r.json()),c=s.envs[0];const u=c==null?void 0:c.id,p=await fetch(`/api/features/${u}`);t(2,a=(await p.json()).features)});async function o(r){if(c=s.envs.find(p=>p.id===r.target.value),!c)return;const u=await fetch(`/api/features/${c.id}`);t(2,a=(await u.json()).features)}return l.$$set=r=>{"params"in r&&t(0,n=r.params)},[n,s,a,o]}class yt extends G{constructor(e){super(),X(this,e,bt,wt,Q,{params:0})}}export{yt as default};
