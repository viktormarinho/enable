import{S as P,i as H,s as J,f as m,g as k,h as ne,b as p,c as S,l as M,t as j,j as Z,k as A,m as x,e as D,o as Q,p as B,q,r as z,I as ae,u as se,v as le,B as re,F as T,w as I,d as o,x as ie,y as oe,G as O,z as ee,H as ce,n as K,a as L,J as te,C as U,D as ue,E as fe}from"./index-8ceaf788.js";import{P as pe,c as de,N as me}from"./Portal-e1d978fa.js";import{C as _e,B as ve}from"./BackToProjects-fa774be7.js";function V(s){let e,t;return e=new pe({props:{$$slots:{default:[he]},$$scope:{ctx:s}}}),{c(){B(e.$$.fragment)},m(n,a){q(e,n,a),t=!0},p(n,a){const r={};a&2063&&(r.$$scope={dirty:a,ctx:n}),e.$set(r)},i(n){t||(j(e.$$.fragment,n),t=!0)},o(n){A(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function ge(s){let e,t;return e=new ce({props:{width:"32",height:"32"}}),{c(){B(e.$$.fragment)},m(n,a){q(e,n,a),t=!0},p:K,i(n){t||(j(e.$$.fragment,n),t=!0)},o(n){A(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function he(s){let e,t,n,a,r,c,l,i,d,y,$,g,b,_,u,f,h,C;function N(w){s[8](w)}let F={type:"text",placeholder:"Feature name",error:"",$$slots:{default:[ge]},$$scope:{ctx:s}};return s[0].name!==void 0&&(F.value=s[0].name),r=new ae({props:F}),se.push(()=>le(r,"value",N)),u=new re({props:{text:"Create",loading:s[3]}}),{c(){e=m("div"),t=m("form"),n=m("span"),n.textContent="New feature",a=k(),B(r.$$.fragment),l=k(),i=m("p"),d=T("Feature identifier: "),y=m("strong"),$=T(s[1]),g=k(),b=m("p"),b.textContent="This is a unique identifier for this feature across all your projects.",_=k(),B(u.$$.fragment),p(n,"class","svelte-tzlhwt"),p(i,"class","svelte-tzlhwt"),p(b,"class","help svelte-tzlhwt"),p(t,"class","modal-content svelte-tzlhwt"),p(e,"class","hidden svelte-tzlhwt"),I(e,"open",s[2])},m(w,v){S(w,e,v),o(e,t),o(t,n),o(t,a),q(r,t,null),o(t,l),o(t,i),o(i,d),o(i,y),o(y,$),o(t,g),o(t,b),o(t,_),q(u,t,null),f=!0,h||(C=[M(t,"submit",s[4]),ie(de.call(null,e)),M(e,"click_outside",s[9])],h=!0)},p(w,v){const E={};v&2048&&(E.$$scope={dirty:v,ctx:w}),!c&&v&1&&(c=!0,E.value=w[0].name,oe(()=>c=!1)),r.$set(E),(!f||v&2)&&O($,w[1]);const G={};v&8&&(G.loading=w[3]),u.$set(G),(!f||v&4)&&I(e,"open",w[2])},i(w){f||(j(r.$$.fragment,w),j(u.$$.fragment,w),f=!0)},o(w){A(r.$$.fragment,w),A(u.$$.fragment,w),f=!1},d(w){w&&D(e),z(r),z(u),h=!1,ee(C)}}}function $e(s){let e,t,n,a,r,c,l=s[2]&&V(s);return{c(){e=m("button"),e.innerHTML="<span>Create feature +</span>",t=k(),l&&l.c(),n=ne(),p(e,"class","btn-secondary")},m(i,d){S(i,e,d),S(i,t,d),l&&l.m(i,d),S(i,n,d),a=!0,r||(c=M(e,"click",s[7]),r=!0)},p(i,[d]){i[2]?l?(l.p(i,d),d&4&&j(l,1)):(l=V(i),l.c(),j(l,1),l.m(n.parentNode,n)):l&&(Z(),A(l,1,1,()=>{l=null}),x())},i(i){a||(j(l),a=!0)},o(i){A(l),a=!1},d(i){i&&(D(e),D(t),D(n)),l&&l.d(i),r=!1,c()}}}function be(s,e,t){let{projectId:n}=e,{projectName:a}=e,r={name:"",project_id:n},c=Q.make(r),l="",i=!1,d=!1;async function y(_){_.preventDefault(),t(3,d=!0);const u=await fetch("/api/features",{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}});if(!u.ok){c=Q.apply(c,await u.json()),t(3,d=!1);return}location.reload()}const $=()=>t(2,i=!0);function g(_){s.$$.not_equal(r.name,_)&&(r.name=_,t(0,r))}const b=()=>t(2,i=!1);return s.$$set=_=>{"projectId"in _&&t(5,n=_.projectId),"projectName"in _&&t(6,a=_.projectName)},s.$$.update=()=>{s.$$.dirty&65&&(r.name.length>0?t(1,l=`${a}_${r.name}`.toLowerCase().split(" ").join("_")):t(1,l=""))},[r,l,i,d,y,n,a,$,g,b]}class we extends P{constructor(e){super(),H(this,e,be,$e,J,{projectId:5,projectName:6})}}function ke(s){let e,t,n,a,r,c;return{c(){e=L("svg"),t=L("path"),n=L("path"),a=L("path"),r=L("path"),c=L("path"),p(t,"stroke","none"),p(t,"d","M0 0h24v24H0z"),p(t,"fill","none"),p(n,"d","M4 13h5"),p(a,"d","M12 16v-8h3a2 2 0 0 1 2 2v1a2 2 0 0 1 -2 2h-3"),p(r,"d","M20 8v8"),p(c,"d","M9 16v-5.5a2.5 2.5 0 0 0 -5 0v5.5"),p(e,"xmlns","http://www.w3.org/2000/svg"),p(e,"class","icon icon-tabler icon-tabler-api"),p(e,"width","24"),p(e,"height","24"),p(e,"viewBox","0 0 24 24"),p(e,"stroke-width","2"),p(e,"stroke","currentColor"),p(e,"fill","none"),p(e,"stroke-linecap","round"),p(e,"stroke-linejoin","round")},m(l,i){S(l,e,i),o(e,t),o(e,n),o(e,a),o(e,r),o(e,c)},p:K,i:K,o:K,d(l){l&&D(e)}}}class ye extends P{constructor(e){super(),H(this,e,null,ke,J,{})}}function je(s){let e,t,n,a,r,c;return n=new ye({}),{c(){e=m("button"),t=m("span"),B(n.$$.fragment),p(t,"class","svelte-16ad7zl"),p(e,"class","btn-secondary svelte-16ad7zl"),I(e,"selected",s[0])},m(l,i){S(l,e,i),o(e,t),q(n,t,null),a=!0,r||(c=M(e,"click",s[1]),r=!0)},p(l,[i]){(!a||i&1)&&I(e,"selected",l[0])},i(l){a||(j(n.$$.fragment,l),a=!0)},o(l){A(n.$$.fragment,l),a=!1},d(l){l&&D(e),z(n),r=!1,c()}}}function Ne(s,e,t){let{selected:n=!1}=e;function a(r){te.call(this,s,r)}return s.$$set=r=>{"selected"in r&&t(0,n=r.selected)},[n,a]}class Ce extends P{constructor(e){super(),H(this,e,Ne,je,J,{selected:0})}}function Ae(s){let e,t,n,a,r,c,l,i,d,y,$,g,b,_,u,f,h,C,N;return{c(){e=m("div"),t=m("div"),n=m("span"),n.textContent='import { EnableClient } from "@enable/ts-sdk";',a=k(),r=m("span"),r.textContent=`export const features = new EnableClient(${`{ url: "${location.origin}", token: env.ENABLE_TOKEN }`});`,c=k(),l=m("span"),i=k(),d=m("span"),d.textContent="...",y=k(),$=m("span"),g=k(),b=m("span"),b.textContent='import { features } from "config";',_=k(),u=m("span"),f=T('const isActive = features.isActive("'),h=T(s[0]),C=T('"); // '),N=T(s[1]),p(t,"class","code svelte-12y50w6"),p(e,"class","api-type-container svelte-12y50w6")},m(F,w){S(F,e,w),o(e,t),o(t,n),o(t,a),o(t,r),o(t,c),o(t,l),o(t,i),o(t,d),o(t,y),o(t,$),o(t,g),o(t,b),o(t,_),o(t,u),o(u,f),o(u,h),o(u,C),o(u,N)},p(F,w){w&1&&O(h,F[0]),w&2&&O(N,F[1])},d(F){F&&D(e)}}}function Te(s){let e,t,n,a,r=location.origin+"",c,l,i,d,y,$,g,b=JSON.stringify({active:s[1]},null,2)+"",_;return{c(){e=m("div"),t=m("div"),n=m("code"),a=T('curl -i -H "Authorization: Bearer ENABLE_TOKEN" -X GET '),c=T(r),l=T("/api/feature/"),i=T(s[0]),d=k(),y=m("span"),y.textContent="Response",$=k(),g=m("code"),_=T(b),p(n,"class","svelte-12y50w6"),p(t,"class","container svelte-12y50w6"),p(y,"class","label svelte-12y50w6"),p(g,"class","svelte-12y50w6"),p(e,"class","api-type-container svelte-12y50w6")},m(u,f){S(u,e,f),o(e,t),o(t,n),o(n,a),o(n,c),o(n,l),o(n,i),o(e,d),o(e,y),o(e,$),o(e,g),o(g,_)},p(u,f){f&1&&O(i,u[0]),f&2&&b!==(b=JSON.stringify({active:u[1]},null,2)+"")&&O(_,b)},d(u){u&&D(e)}}}function Ee(s){let e,t,n,a,r,c,l,i,d,y,$,g;function b(f,h){if(f[2]==="rest")return Te;if(f[2]==="ts-sdk")return Ae}let _=b(s),u=_&&_(s);return{c(){e=m("div"),t=m("div"),n=m("span"),a=T("REST API"),c=k(),l=m("span"),i=T("Typescript SDK"),y=k(),u&&u.c(),p(n,"aria-selected",r=s[2]==="rest"),p(n,"class","svelte-12y50w6"),p(l,"aria-selected",d=s[2]==="ts-sdk"),p(l,"class","svelte-12y50w6"),p(t,"class","tab-controls svelte-12y50w6"),p(e,"class","defs svelte-12y50w6")},m(f,h){S(f,e,h),o(e,t),o(t,n),o(n,a),o(t,c),o(t,l),o(l,i),o(e,y),u&&u.m(e,null),$||(g=[M(n,"click",s[3]),M(l,"click",s[4])],$=!0)},p(f,[h]){h&4&&r!==(r=f[2]==="rest")&&p(n,"aria-selected",r),h&4&&d!==(d=f[2]==="ts-sdk")&&p(l,"aria-selected",d),_===(_=b(f))&&u?u.p(f,h):(u&&u.d(1),u=_&&_(f),u&&(u.c(),u.m(e,null)))},i:K,o:K,d(f){f&&D(e),u&&u.d(),$=!1,ee(g)}}}function Fe(s,e,t){let{name:n=""}=e,{active:a=!1}=e,r="rest";const c=()=>t(2,r="rest"),l=()=>t(2,r="ts-sdk");return s.$$set=i=>{"name"in i&&t(0,n=i.name),"active"in i&&t(1,a=i.active)},[n,a,r,c,l]}class Be extends P{constructor(e){super(),H(this,e,Fe,Ee,J,{name:0,active:1})}}function qe(s){let e,t,n,a,r,c=s[0].id+"",l,i,d,y,$,g=s[0].active?"Active":"Disabled",b,_,u,f,h,C,N,F,w;return n=new _e({props:{text:s[0].id}}),d=new Ce({props:{selected:s[1]}}),d.$on("click",s[3]),C=new Be({props:{name:s[0].id,active:s[0].active}}),{c(){e=m("div"),t=m("div"),B(n.$$.fragment),a=k(),r=m("span"),l=T(c),i=k(),B(d.$$.fragment),y=k(),$=m("span"),b=T(g),_=k(),u=m("button"),u.innerHTML='<div class="ball svelte-piq3xe"></div>',f=k(),h=m("div"),B(C.$$.fragment),p(r,"class","name svelte-piq3xe"),p($,"class","tag svelte-piq3xe"),I($,"tag-active",s[0].active),p(u,"class","toggle svelte-piq3xe"),I(u,"active",s[0].active),p(t,"class","feature svelte-piq3xe"),p(h,"class","no-h svelte-piq3xe"),I(h,"show",s[1]),p(e,"class","feature-container svelte-piq3xe")},m(v,E){S(v,e,E),o(e,t),q(n,t,null),o(t,a),o(t,r),o(r,l),o(t,i),q(d,t,null),o(t,y),o(t,$),o($,b),o(t,_),o(t,u),o(e,f),o(e,h),q(C,h,null),N=!0,F||(w=M(u,"click",s[2]),F=!0)},p(v,[E]){const G={};E&1&&(G.text=v[0].id),n.$set(G),(!N||E&1)&&c!==(c=v[0].id+"")&&O(l,c);const X={};E&2&&(X.selected=v[1]),d.$set(X),(!N||E&1)&&g!==(g=v[0].active?"Active":"Disabled")&&O(b,g),(!N||E&1)&&I($,"tag-active",v[0].active),(!N||E&1)&&I(u,"active",v[0].active);const R={};E&1&&(R.name=v[0].id),E&1&&(R.active=v[0].active),C.$set(R),(!N||E&2)&&I(h,"show",v[1])},i(v){N||(j(n.$$.fragment,v),j(d.$$.fragment,v),j(C.$$.fragment,v),N=!0)},o(v){A(n.$$.fragment,v),A(d.$$.fragment,v),A(C.$$.fragment,v),N=!1},d(v){v&&D(e),z(n),z(d),z(C),F=!1,w()}}}function ze(s,e,t){let{feature:n}=e,a=!1;function r(l){te.call(this,s,l)}const c=()=>t(1,a=!a);return s.$$set=l=>{"feature"in l&&t(0,n=l.feature)},[n,a,r,c]}class Se extends P{constructor(e){super(),H(this,e,ze,qe,J,{feature:0})}}function W(s,e,t){const n=s.slice();return n[3]=e[t],n}function Y(s){let e,t;function n(){return s[2](s[3])}return e=new Se({props:{feature:s[3]}}),e.$on("click",n),{c(){B(e.$$.fragment)},m(a,r){q(e,a,r),t=!0},p(a,r){s=a;const c={};r&1&&(c.feature=s[3]),e.$set(c)},i(a){t||(j(e.$$.fragment,a),t=!0)},o(a){A(e.$$.fragment,a),t=!1},d(a){z(e,a)}}}function De(s){let e,t,n=U(s[0]),a=[];for(let c=0;c<n.length;c+=1)a[c]=Y(W(s,n,c));const r=c=>A(a[c],1,1,()=>{a[c]=null});return{c(){e=m("div");for(let c=0;c<a.length;c+=1)a[c].c();p(e,"class","feature-list svelte-1oo10f7")},m(c,l){S(c,e,l);for(let i=0;i<a.length;i+=1)a[i]&&a[i].m(e,null);t=!0},p(c,[l]){if(l&3){n=U(c[0]);let i;for(i=0;i<n.length;i+=1){const d=W(c,n,i);a[i]?(a[i].p(d,l),j(a[i],1)):(a[i]=Y(d),a[i].c(),j(a[i],1),a[i].m(e,null))}for(Z(),i=n.length;i<a.length;i+=1)r(i);x()}},i(c){if(!t){for(let l=0;l<n.length;l+=1)j(a[l]);t=!0}},o(c){a=a.filter(Boolean);for(let l=0;l<a.length;l+=1)A(a[l]);t=!1},d(c){c&&D(e),ue(a,c)}}}function Ie(s,e,t){let{features:n=[]}=e;async function a(c){(await fetch("/api/features/toggle",{method:"POST",body:JSON.stringify({id:c}),headers:{"Content-Type":"application/json"}})).ok&&t(0,n=n.map(i=>(i.id==c&&(i.active=!i.active),i)))}const r=c=>a(c.id);return s.$$set=c=>{"features"in c&&t(0,n=c.features)},[n,a,r]}class Oe extends P{constructor(e){super(),H(this,e,Ie,De,J,{features:0})}}function Me(s){let e,t,n,a,r,c,l,i,d=s[1].project.name+"",y,$,g,b,_,u;return t=new me({}),r=new ve({}),g=new we({props:{projectId:Number(s[0].id),projectName:s[1].project.name}}),_=new Oe({props:{features:s[1].features}}),{c(){e=m("div"),B(t.$$.fragment),n=k(),a=m("div"),B(r.$$.fragment),c=k(),l=m("header"),i=m("h1"),y=T(d),$=k(),B(g.$$.fragment),b=k(),B(_.$$.fragment),p(l,"class","page-header"),p(a,"class","page")},m(f,h){S(f,e,h),q(t,e,null),o(e,n),o(e,a),q(r,a,null),o(a,c),o(a,l),o(l,i),o(i,y),o(l,$),q(g,l,null),o(a,b),q(_,a,null),u=!0},p(f,[h]){(!u||h&2)&&d!==(d=f[1].project.name+"")&&O(y,d);const C={};h&1&&(C.projectId=Number(f[0].id)),h&2&&(C.projectName=f[1].project.name),g.$set(C);const N={};h&2&&(N.features=f[1].features),_.$set(N)},i(f){u||(j(t.$$.fragment,f),j(r.$$.fragment,f),j(g.$$.fragment,f),j(_.$$.fragment,f),u=!0)},o(f){A(t.$$.fragment,f),A(r.$$.fragment,f),A(g.$$.fragment,f),A(_.$$.fragment,f),u=!1},d(f){f&&D(e),z(t),z(r),z(g),z(_)}}}function Pe(s,e,t){let{params:n={id:""}}=e,a={project:{name:""},features:[]};return fe(async()=>{const r=await fetch(`/api/features/${n.id}`);t(1,a=await r.json())}),s.$$set=r=>{"params"in r&&t(0,n=r.params)},[n,a]}class Ke extends P{constructor(e){super(),H(this,e,Pe,Me,J,{params:0})}}export{Ke as default};
